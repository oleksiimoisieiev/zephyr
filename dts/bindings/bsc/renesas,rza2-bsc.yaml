# Copyright (c) 2023 Epam Systems
# SPDX-License-Identifier: Apache-2.0

description: |
  The bus state controller outputs control signals for various types of
  memory and external devices that are connected to the external address
  space. The functions of this module enable this LSI to connect directly
  with SRAM, SDRAM, and other memory storage devices, and external devices.

compatible: "renesas,rza2-bsc"

include: base.yaml

properties:
  reg:
    required: true

  "#address-cells":
    const: 1

  "#size-cells":
    const: 0

child-binding:
  description: |
    LSI has 32-bit address space, divided into external memory spaces according to the upper
    bits of address:
      H'00000000 to H'03FFFFFF CS0 Normal space, SRAM with byte selection,
                 burst ROM (asynchronous or synchronous)
      H'04000000 to H'07FFFFFF CS1 Normal space, SRAM with byte selection
      H'08000000 to H'0BFFFFFF CS2 Normal space, SRAM with byte selection, SDRAM
      H'0C000000 to H'0FFFFFFF CS3 Normal space, SRAM with byte selection, SDRAM
      H'10000000 to H'13FFFFFF CS4 Normal space, SRAM with byte selection, burst ROM (asynchronous)
      H'14000000 to H'17FFFFFF CS5 Normal space, SRAM with byte selection, MPX-I/O
      H’1F000000 to H’8FFFFFFF Others On-chip peripheral module, SPI multi I/O bus space,
                 HyperFlash TM / HyperRAM TM space, OctaFlash TM / OctaRAM TM space, on-chip
                 large-capacity RAM, on-chip data retention RAM, reserved area.
    Each node represets one Address area with the selected memory type.

  include: pinctrl-device.yaml

  properties:
    reg:
      type: int
      required: true
      description: Area identifier.

    type:
      type: int
      required: true
      enum:
        - 0 # Normal Memory
        - 1 # Burst Async
        - 2 # MPX_IO
        - 3 # SRAM Byte Select
        - 4 # SDRAM
        - 5 # Burst Sync
      description: Memory type.

    pinctrl-0:
      description: |
        Set pin configuration for the Bus State Controller. This is needed to
        control and configure Data and Access busses.

    sw:
      type: int
      enum:
        - 0 # 0.5 cycles
        - 1 # 1.5 cycles
        - 2 # 2.5 cycles
        - 3 # 3.5 cycles
      description: Number of Delay Cycles from Address.

    hw:
      type: int
      enum:
        - 0 # 0.5 cycles
        - 1 # 1.5 cycles
        - 2 # 2.5 cycles
        - 3 # 3.5 cycles
      description: Delay Cycles from RD#, WEn# Negation to Address.

    iwrrs:
      type: int
      description: |
        Idle Cycles for Read-Read in the Same Space. Please See HW Manual for supported values.

    iwrrd:
      type: int
      description: |
        Idle Cycles for Read-Read in Another Space. Please See HW Manual for supported values.

    idle:
      type: int
      description: Idle time for SDRAM startup sequence. Size uint32.

    sdcs2:
      type: int
      description: set MODE CS2 for SDRAM. Size uint16.

    sdcs3:
      type: int
      description: set MODE CS3 for SDRAM. Size uint16.

    iwrws:
      type: int
      description: Idle Cycles for Read-Write in the Same Space.

    iwrwd:
      type: int
      description: Idle Cycles for Another Space Read-Write

    iww:
      type: int
      description: Idle Cycles between Write-Read Cycles and Write-Write Cycles

    auto_ref:
      type: int
      description: Auto refresh feature. 1 to enable and 0 to disable.

    rtcor:
      type: int
      description: Refresh Timer Constant Register value. Size is uint8.

    rtcnt:
      type: int
      description: Refresh Timer Counter value. Size is uint8.

    cks:
      type: int
      description: |
        Select the clock input to count-up the refresh timer counter (RTCNT).
        See HW manual for allowed values.

    rrc:
      type: int
      enum:
        - 1
        - 2
        - 4
        - 6
        - 8
      description: Specify the number of continuous refresh cycles

    deep:
      type: int
      enum:
        - 0 # Self-refresh mode
        - 1 # Deep power-down mode
      description: Deep Power-Down Mode.

    pwr_down:
      type: int
      description: Set powerdown state.

    bas:
      type: int
      description: SRAM with Byte Selection Byte Access Select.

    bw:
      type: int
      enum:
        - 0 # no cycle
        - 1 # 1 cycle
        - 2 # 2 cycles
        - 3 # 3 cycles
      description: Number of Burst Wait Cycles.

    a2row:
      type: int
      enum:
        - 0 # 11 bits
        - 1 # 12 bits
        - 2 # 13 bits
      description: Number of Bits of Row Address for Area 2.

    a2col:
      type: int
      enum:
        - 0 # 8 bits
        - 1 # 9 bits
        - 2 # 10 bits
      description: Number of Bits of Column Address for Area 2.

    a3col:
      type: int
      enum:
        - 0 # 8 bits
        - 1 # 9 bits
        - 2 # 10 bits
      description: Number of Bits of Column Address for Area 3.

    a3row:
      type: int
      enum:
        - 0 # 11 bits
        - 1 # 12 bits
        - 2 # 13 bits
      description: Number of Bits of Row Address for Area 3.

    bactv:
      type: int
      enum:
        - 0 # Auto-precharge mode
        - 1 # Bank active mode
      description: Bank Active Mode. Can be set only for Area 3.

    wr_wait_cycles:
      type: int
      enum:
        - 0 # No cycle
        - 1
        - 2
        - 3
        - 4
        - 5
        - 6
        - 8
        - 10
        - 12
        - 14
        - 18
        - 24
      description: Number of Access Wait Cycles.

    ww_wait_cycles:
      type: int
      enum:
        - 0 # No cycle
        - 1
        - 2
        - 3
        - 4
        - 5
        - 6
      description: Number of Write Access Wait Cycles.

    wtrcd:
      type: int
      enum:
        - 0 # No cycle
        - 1
        - 2
        - 3
      description: Number of Wait Cycles between ACTV Command and READ(A)/WRIT(A) Command.

    a3cl:
      type: int
      enum:
        - 1 # cycle
        - 2
        - 3
        - 4
      description: CAS Latency for Area 3.

    wtrp:
      type: int
      enum:
        - 0 # No cycle
        - 1
        - 2
        - 3
      description: Number of Auto-Precharge Completion Wait Cycles.

    trwl:
      type: int
      enum:
        - 0 # No cycle
        - 1
        - 2
        - 3
      description: Number of Auto-Precharge Startup Wait Cycles.

    wtrc:
      type: int
      enum:
        - 2 # Cycles
        - 3
        - 5
        - 8
      description: |
       Number of Idle Cycles from REF Command/Self-Refresh Release to ACTV/REF/MRS
       Command.

    a2cl:
      type: int
      enum:
        - 0 # 1 Cycle
        - 1 # 2 Cycles
        - 2 # 3 Cycles
        - 3 # 4 Cycles
      description: CAS Latency for Area 2.

    wm:
      type: int
      enum:
        - 0 # External wait input is valid
        - 1 # External wait input is ignored
      description: External Wait Mask Specification

    bsz:
      type: int
      enum:
        - 8 # 8 bit bus width
        - 16 # 16 bit bus width
      description: |
        Data Bus Width Specification. If area = 5 and type = MEM_MPX_IO then
        this parameter is ignored.

    szsel:
      type: int
      enum:
        - 0 # Selects the bus width by address A14
        - 1 # Selects the bus width by address A21
      description: |
        MPX-I/O Interface Bus Width Specification. This parameter is valid
        only for area = 5 and type = MEM_MPX_IO.

    sdridly:
      type: int
      enum:
        - 0 # The SDRAM is not to be connected.
        - 15 # (0xF). The SDRAM is to be connected.
      description: Input characteristics adjustment bit. Valid only for SDRAM memory type.

    sdrodly:
      type: int
      enum:
        - 0 # The SDRAM is not to be connected.
        - 2 # The SDRAM is to be connected.
      description: Output characteristics adjustment bit. Valid only for SDRAM memory type.
